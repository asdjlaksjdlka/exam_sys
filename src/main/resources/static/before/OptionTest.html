<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>自我检测</title>
	<link rel="shortcut icon" href="favicon.ico" />
	<link rel="stylesheet" type="text/css" href="skins/default/style.css" />
	<script src="../js/baseutil.js" type="text/javascript"></script>
	<script src="../js/wdatepicker/WdatePicker.js" type="text/javascript"></script>
	
	<script src="../js/layer/layer.js" type="text/javascript"></script>

	<style>
		.tm_section_setting{}
		.tm_section_table{border-collapse:collapse; margin:0 0 20px 0; border:solid 1px #eee;}
		.tm_section_table tr td{border:solid 1px #eee !important;}
		.tm_section_table tr th{border:none !important; background:#eee; }
		.tm_section_table tr th a{margin:0 auto;}

		.tm_section_template{display:none}

		.tm_usertip{margin:20px 0 20px 0; border:solid 1px #fa0; background:#ffd; padding:10px; width:500px}
	</style>

	<link rel="stylesheet" href=../js/jquery-validation-engine/css/validationEngine.jquery.css" />
	<script src="../js/jquery-validation-engine/js/jquery.validationEngine.js"></script>
	
	
	<script src="../js/jquery-validation-engine/js/languages/jquery.validationEngine-zh_CN.js"></script>
	

	
	<link rel="stylesheet" type="text/css" href="css/font.css"/>
	<script type="text/javascript" src="../js/layer.js"></script>

	<script type="text/javascript">

		$(document).ready(function() {
			tmPaper.addSection();
			jQuery('#form_paper_fastadd').validationEngine();
		});

		var tmPaper = {
			addSection : function(){
				var temp = $(".tm_section_template").html();
				$(".tm_section_setting").append(temp);
			}, 
			
			removeSection : function(obj){
				$(obj).parent().parent().parent().parent().remove()
			},

			quickStart : function(){
				if(window.confirm('确定要开始进行随机自测吗？')){
					$("#form_qiuck_start").submit();
				}
			}
		};

		function tm_fun_disabled(){
			alert('对不起，该功能被管理员禁止。如有需要，请联系管理员。');
			return false;
		}

	</script>
  </head>
  
<body>

	<div class="tm_main">
    	
		<div class="tm_container">
			<ul class="tm_breadcrumb">
				<li><a href="common/welcome.thtml">首页</a> <span class="divider">&gt;</span></li>
				<li class="active">自我检测</li>
			</ul>
		</div>
        
        <div class="tm_container">
        	<div class="tm_navtitle">
				<h1>自我检测</h1>
                <span>请在下列的表单中设置自我检测试卷的参数，以便生成试卷</span>
            </div>
        </div>
        
        <br/>
        <div class="tm_container">
			<form action="http://localhost:8080/examsys/SaveTestMapper.do"  id="form_paper_fastadd">
        	<table width="100%" cellpadding="5" border="0" class="tm_table_form">
            	<tbody>
					<colgroup>
						<col width="15%"></col>
						<col width="85%"></col>
					</colgroup>
					<tr>
                        <th>试卷名称 : </th>
                        <td><input type="text" name="p_name" class="validate[required] tm_txt" size="50" style="width:400px" maxlength="30" /></td>
                    </tr>
					<tr>
                        <th>考试时长 : </th>
                        <td><input type="text" name="p_duration" class="validate[required,custom[integer],min[1],max[120]] tm_txt tm_width200" size="20" maxlength="3" /> 分钟</td>
                    </tr>
                    <tr>
                      <th>章节设定 : </th>
                        <td>
							<div style="margin:0 0 5px 0;">
								<input type='button' class='tm_btn' value='增加章节' onclick='tmPaper.addSection();' />
							</div>

							<div class="tm_section_setting"></div>

							<!--<div class="tm_usertip">
								<b>友情提醒</b>：用于自测的试题数量与管理员设置有关，如数量不足，请与管理员联系。
							</div>-->

						</td>
                    </tr>
                </tbody>
                
                <tfoot>
                	<tr>
                    	<th></th>
                        <td>
							
								
									<button class="tm_btn tm_btn_primary" type="submit">提交</button>
									<button class="tm_btn" type="button" onclick="javascript:tmPaper.quickStart();">跳过设置，快速开始</button>
								

                        </td>
                    </tr>
                </tfoot>
            </table>
			</form>
        </div>
    </div>

	<!-- tm_section_template -->
	<div class="tm_section_template">
		<table border="0" cellpadding="5" cellspacing="0" class="tm_section_table">
			<tr>
				<td>
					<input type="text" name="p_section_names" class="validate[required] tm_txt" style="width:400px" size="50" maxlength="20" placeholder='章节名称' />
					&nbsp;
					<input type="hidden" name="p_section_remarks" class="tm_txt tm_width300" size="50" maxlength="50" />
				</td>
				<th width="50" align="center" rowspan="2">
					<a href="javascript:;" onclick="tmPaper.removeSection(this);" class="tm_ico_delete"></a>
				</th>
			</tr>
			<tr>
				<td>
					<select name="p_dbids" class="validate[required] tm_select" style="min-width:150px">
						<option value="">请选择题库</option>						
						<option value="1">javaSE</option>								
						<option value="2">HTML5</option>						
						<option value="3">JavaWEB</option>				
						<option value="4">Mysql</option>						
						<option value="5">Python</option>
					
					</select>

					<select name="p_qtypes" class="validate[required] tm_select" style="min-width:100px">
						<option value="">请选择题型</option>
						<option value="1">单选题</option>
						<option value="2">判断题</option>
						<!--<option value="3">简答题</option>-->
					</select>

					<select name="p_levels" class="validate[required] tm_select" style="min-width:100px">
						<option value="">选择难度</option>
						<option value="1">非常容易</option>
						<option value="2">比较容易</option>
						<option value="3" selected>常规</option>
					
					</select>
					试题数量 : 
					<input type="text" class="validate[required,custom[integer],min[1]] tm_txt" size="3" name="p_qnums" value="5" />

					<!--每题分值 : 
					<input type="text" class="validate[required,custom[integer],min[1]] tm_txt" size="3" name="p_scores" value="1" />-->
				</td>
			</tr>
		</table>
	</div>
	<!-- /tm_section_template -->

	<div style="display:none">
		
		<form action="../examsys/makeTestMapper" method="post" id="form_qiuck_start">
		
			<input type="hidden" name="p_name" value="自我检测" />
			<input type="hidden" name="p_duration" value="10" />

			<input type="hidden" name="p_section_names" value="单选题" />
			<input type="hidden" name="p_section_remarks" value="单选题" />
			<input type="hidden" name="p_dbids"		value="1" />
			<input type="hidden" name="p_levels"	value="1" />
			<input type="hidden" name="p_qtypes"	value="1" />
			<input type="hidden" name="p_qnums"		value="10" />
			<input type="hidden" name="p_scores"	value="5" />

			

			<input type="hidden" name="p_section_names" value="判断题" />
			<input type="hidden" name="p_section_remarks" value="判断题" />
			<input type="hidden" name="p_dbids"		value="1" />
			<input type="hidden" name="p_levels"	value="1" />
			<input type="hidden" name="p_qtypes"	value="2" />
			<input type="hidden" name="p_qnums"		value="5" />
			<input type="hidden" name="p_scores"	value="5" />

		</form>
	</div>

</body>
<script type="text/javascript">
	var flag = window.location.search;
	if( flag == "?flag=-1"){
	alert("相同的课程不能选择同种类型！！！")
	}
</script>
</html>
