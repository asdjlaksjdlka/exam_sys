<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>自我检测</title>
    <link rel="shortcut icon" href="favicon.ico"/>
    <link rel="stylesheet" type="text/css" href="../css/default/style.css"/>
    <script src="../js/baseutil.js" type="text/javascript"></script>
    <script src="../js/wdatepicker/WdatePicker.js" type="text/javascript"></script>

    <script src="../js/layer/layer.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../js/layui/css/layui.css"/>
    <script type="text/javascript" src="../js/layui/layui.js"></script>
    <script type="text/javascript" src="../js/jquery-1.12.2.min.js"></script>

    <style>
        .tm_section_setting {
        }

        .tm_section_table {
            border-collapse: collapse;
            margin: 0 0 20px 0;
            border: solid 1px #eee;
        }

        .tm_section_table tr td {
            border: solid 1px #eee !important;
        }

        .tm_section_table tr th {
            border: none !important;
            background: #eee;
        }

        .tm_section_table tr th a {
            margin: 0 auto;
        }

        .tm_section_template {
            display: none
        }

        .tm_usertip {
            margin: 20px 0 20px 0;
            border: solid 1px #fa0;
            background: #ffd;
            padding: 10px;
            width: 500px
        }
    </style>

    <link rel="stylesheet" href=../js/jquery-validation-engine/css/validationEngine.jquery.css"/>
    <script src="../js/jquery-validation-engine/js/jquery.validationEngine.js"></script>


    <script src="../js/jquery-validation-engine/js/languages/jquery.validationEngine-zh_CN.js"></script>


    <link rel="stylesheet" type="text/css" href="../css/font.css"/>
    <script type="text/javascript" src="../js/layer.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            tmPaper.addSection();
            jQuery('#form_paper_fastadd').validationEngine();
        });

        var tmPaper = {
            addSection: function () {
                var temp = $(".tm_section_template").html();
                $(".tm_section_setting").append(temp);
            },

            removeSection: function (obj) {
                $(obj).parent().parent().parent().parent().remove()
            },

            quickStart: function () {
                if (window.confirm('确定要开始进行随机自测吗？')) {
                    $("#form_qiuck_start").submit();
                }
            }
        };

        function tm_fun_disabled() {
            alert('对不起，该功能被管理员禁止。如有需要，请联系管理员。');
            return false;
        }

    </script>

	<script type="text/html" id="barDemo">
		<a class="layui-btn layui-btn-xs" lay-event="edit">
			<i class="layui-icon"></i>
		</a>
		<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">
			<i class="layui-icon"></i>
		</a>
	</script>
</head>

<body>

<div class="tm_main">

    <div class="tm_container">
        <ul class="tm_breadcrumb">
            <li><a href="common/welcome.thtml">首页</a> <span class="divider">&gt;</span></li>
            <li class="active">自我检测</li>
        </ul>
    </div>

    <div class="tm_container">
        <div class="tm_navtitle">
            <h1>自我检测</h1>
            <span>请在下列的表单中设置自我检测试卷的参数，以便生成试卷</span>
        </div>
    </div>

    <br/>
    <div class="tm_container">
        <form action="http://localhost:8080/examsys/SaveTestMapper.do" id="form_paper_fastadd">
            <table width="100%" cellpadding="5" border="0" class="tm_table_form">
                <tbody>
                <colgroup>
                    <col width="15%"></col>
                    <col width="85%"></col>
                </colgroup>
                <tr>
                    <th>试卷名称 :</th>
                    <td><input type="text" name="p_name" class="validate[required] tm_txt" size="50" style="width:400px"
                               maxlength="30"/></td>
                </tr>
                <tr>
                    <th>考试时长 :</th>
                    <td><input type="text" name="p_duration"
                               class="validate[required,custom[integer],min[1],max[120]] tm_txt tm_width200" size="20"
                               maxlength="3"/> 分钟
                    </td>
                </tr>
                <tr>
                    <th>章节设定 :</th>
                    <td>


                        <!--每题分值 :
                        <input type="text" class="validate[required,custom[integer],min[1]] tm_txt" size="3" name="p_scores" value="1" />-->
                    </td>
                </tr>
                </tbody>
                <div class="layui-form searchDiv">
                    <div class="layui-form-item" style="margin-left: 550px">

                        <div class="layui-input-inline">
                            <select name="sid" id="sid">
                                <option value="">科目</option>
                            </select>
                        </div>

                        <button type="button" class="layui-btn layui-btn-normal layui-btn-sm" data-type="reload"
                                style="height:38px">
                            <i class="layui-icon layui-icon-search"></i>
                        </button>
                    </div>

                </div>
                <button class="tm_btn tm_btn_primary" type="submit">提交</button>
                <button class="tm_btn" type="button" onclick="javascript:tmPaper.quickStart();">跳过设置，快速开始</button>

            </table>
        </form>
    </div>
</div>

<!--ajax请求加载页面下拉框内容-->
<script type="text/javascript">
	$(function () {
		$.ajax({
			url: "../subject/list",
			dataType: "json",
			type: "get",
			success: function (returnData) {
				$(returnData.data).each(function (index, item) {
					// alert(item.sid+item.sName)
					var html = "<option value=" + item.sid + ">" + item.sName + "</option>";
					$("#sid").append(html);
				})
			}
		});
	});
</script>


</body>
<script type="text/javascript">
    var flag = window.location.search;
    if (flag == "?flag=-1") {
        alert("相同的课程不能选择同种类型！！！")
    }
</script>
</html>
