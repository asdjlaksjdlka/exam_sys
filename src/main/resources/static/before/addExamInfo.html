<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>添加考试信息</title>
    <style type="text/css">


    </style>
    <link rel="stylesheet" href="../js/layui/css/layui.css"/>
    <script type="text/javascript" src="../js/jquery-1.12.2.min.js"></script>
    <script type="text/javascript" src="../js/layui/layui.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/font.css"/>
</head>

<body>
<div>
    <form class="layui-form" action="">
        <div class="layui-form-item">
            <label class="layui-form-label">考试选择</label>
            <div class="layui-input-inline">
                <select id="test3" name="eid">
                    <option value="">请选择考试</option>
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit="" lay-filter="demo1">开始考试</button>
            </div>
        </div>
    </form>
</div>

<script>
    //一般直接写在一个js文件中
    layui.use(['layer', 'laydate', 'form'], function () {
        var layer = layui.layer,
             form = layui.form,
            laydate = layui.laydate;

        $(function () {
            $.ajax({
                type: "post",
                url: "../examsys/selectExamMapper",
                dataType: "json",
                success: function (data) {
                    if (data.code == 1) {
                        var infos = data.data;
                        $(infos).each(function (index, item) {
                            var html = '<option value ="' + item.eid +"&sid=" +item.sid+ '">' + item.eName + '</option>';
                            $("#test3").append(html)
                        })
                        form.render('select');
                    } else {
                        alert(data.info);
                    }
                }
            })
        })
        //监听提交
        form.on('submit(demo1)', function (data) {

           var selcectdata =$("#test3").val();
           alert(selcectdata);
            $.ajax({
                type: "post",
                url: "../examsys/makeTestMapper",
                data: {"exam":selcectdata},
                dataType: "json",
                success: function (data) {
                    if (data.code == 1) {

                        window.location.href="ExamMapper.html?eid="+selcectdata;
                        // alert(data.msg);
                    } else {
                        alert(data.info);
                    }
                }
            })



            // 阻止默认的提交
            return false;
        });
    });




</script>

</body>

</html>